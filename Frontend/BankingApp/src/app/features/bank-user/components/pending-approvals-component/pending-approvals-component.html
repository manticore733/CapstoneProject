<div class="space-y-8">
  
  <div *ngIf="loading" class="text-center py-10">
    <p class="text-gray-500">Loading all pending approvals...</p>
  </div>

  <div *ngIf="error" class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
    <p class="font-bold">Error</p>
    <p>{{ error }}</p>
  </div>

  <div *ngIf="!loading && !error">

    <div class="bg-white shadow p-6 rounded-2xl">
      <h2 class="text-xl font-bold text-gray-700 mb-4">⏳ Pending Payments</h2>

      <div *ngIf="pendingPayments.length === 0" class="text-center text-gray-400 py-6">
        No pending payments found.
      </div>

      <table *ngIf="pendingPayments.length > 0" class="min-w-full border border-gray-200 rounded">
        <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
          <tr>
            <th class="py-2 px-3 text-left">Beneficiary</th>
            <th class="py-2 px-3 text-left">Amount</th>
            <th class="py-2 px-3 text-left">Remarks</th>
            <th class="py-2 px-3 text-left">Date</th>
            <th class="py-2 px-3 text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of pendingPayments" class="border-b hover:bg-gray-50">
            <td class="py-2 px-3">
              <div>{{ p.beneficiaryName }}</div>
              <div class="text-xs text-gray-500">{{ p.destinationAccountNumber }}</div>
            </td>
            <td class="py-2 px-3">{{ p.amount | currency:'INR' }}</td>
            <td class="py-2 px-3">{{ p.remarks || '—' }}</td>
            <td class="py-2 px-3">{{ p.createdAt | date:'short' }}</td>
            <td class="py-2 px-3 text-center space-x-2">
              <button
                [disabled]="actionLoading['pay-' + p.transactionId]"
                (click)="approvePayment(p.transactionId)"
                class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 disabled:bg-gray-300"
              >
                {{ actionLoading['pay-' + p.transactionId] ? '...' : 'Approve' }}
              </button>
              <button
                [disabled]="actionLoading['pay-' + p.transactionId]"
                (click)="rejectPayment(p.transactionId)"
                class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 disabled:bg-gray-300"
              >
                {{ actionLoading['pay-' + p.transactionId] ? '...' : 'Reject' }}
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="bg-white shadow p-6 rounded-2xl">
      <h2 class="text-xl font-bold text-gray-700 mb-4">⏳ Pending Salary Disbursements</h2>

      <div *ngIf="pendingSalaries.length === 0" class="text-center text-gray-400 py-6">
        No pending salary disbursements found.
      </div>
      
      <table *ngIf="pendingSalaries.length > 0" class="min-w-full border border-gray-200 rounded">
        <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
          <tr>
            <th class="py-2 px-3 text-left">Total Amount</th>
            <th class="py-2 px-3 text-left">Employees</th>
            <th class="py-2 px-3 text-left">Remarks</th>
            <th class="py-2 px-3 text-left">Date</th>
            <th class_="py-2 px-3 text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let s of pendingSalaries" class="border-b hover:bg-gray-50">
            <td class="py-2 px-3">{{ s.totalAmount | currency:'INR' }}</td>
            <td class="py-2 px-3">{{ s.totalEmployees }}</td>
            <td class="py-2 px-3">{{ s.remarks || '—' }}</td>
            <td class="py-2 px-3">{{ s.createdAt | date:'short' }}</td>
            <td class="py-2 px-3 text-center space-x-2">
              <button
                [disabled]="actionLoading['sal-' + s.transactionId]"
                (click)="approveSalary(s.transactionId)"
                class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 disabled:bg-gray-300"
              >
                {{ actionLoading['sal-' + s.transactionId] ? '...' : 'Approve' }}
              </button>
              <button
                [disabled]="actionLoading['sal-' + s.transactionId]"
                (click)="rejectSalary(s.transactionId)"
                class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 disabled:bg-gray-300"
              >
                {{ actionLoading['sal-' + s.transactionId] ? '...' : 'Reject' }}
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>