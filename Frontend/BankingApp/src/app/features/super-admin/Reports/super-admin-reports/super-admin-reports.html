<div class="space-y-6">
  <!-- Header -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
        <svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
        System Reports
      </h2>
      <p class="text-sm text-gray-500 mt-1">Live system-wide summary and report history</p>
    </div>

    <button
      (click)="downloadExcel()"
      [disabled]="isExporting"
      class="flex items-center gap-2 bg-blue-600 text-white px-5 py-2.5 rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg font-medium"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 4v12m0 0l-3-3m3 3l3-3M5 20h14" />
      </svg>
      {{ isExporting ? 'Exporting...' : 'Download Excel' }}
    </button>
  </div>

  <!-- Summary Cards -->
  <div *ngIf="systemSummary" class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
      <p class="text-sm text-gray-500">Total Banks</p>
      <h3 class="text-2xl font-bold text-blue-600">{{ systemSummary.totalBanks || 0 }}</h3>
    </div>
    <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
      <p class="text-sm text-gray-500">Total Bank Users</p>
      <h3 class="text-2xl font-bold text-green-600">{{ systemSummary.totalBanks || 0 }}</h3>
    </div>
    <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
      <p class="text-sm text-gray-500">Total Client Users</p>
      <h3 class="text-2xl font-bold text-purple-600">{{ systemSummary.totalClients || 0 }}</h3>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center py-10 text-gray-500">
    <svg class="w-6 h-6 animate-spin mx-auto text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10" stroke-width="4" class="opacity-25"></circle>
      <path fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
    </svg>
    <p class="mt-2">Loading system summary...</p>
  </div>

  <!-- Report History -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <h3 class="text-xl font-semibold text-gray-800 mb-4">Report History</h3>

    <div *ngIf="reportHistory.length > 0; else noHistory">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">#</th>
              <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Report Name</th>
              <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date Generated</th>
              <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-right">Download</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <tr *ngFor="let report of reportHistory; let i = index" class="hover:bg-gray-50 transition">
              <td class="px-6 py-4 text-sm text-gray-600">{{ i + 1 }}</td>
              <td class="px-6 py-4 text-sm font-medium text-gray-800">{{ report.fileName }}</td>
              <td class="px-6 py-4 text-sm text-gray-500">{{ formatDate(report.generatedAt || report.createdAt) }}</td>
              <td class="px-6 py-4 text-right">
                <a [href]="report.fileUrl" target="_blank" class="text-blue-600 hover:underline font-medium">
                  Download
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <ng-template #noHistory>
      <div class="text-center py-10 text-gray-500">
        <svg class="w-10 h-10 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
        </svg>
        <p class="mt-2">No report history found.</p>
      </div>
    </ng-template>
  </div>
</div>
